import{T as ue}from"./TopNav-D4Fz84cq.js";import{A as pe,a6 as ve,h as B,a7 as X,a8 as ge,y as G,a9 as me,r as S,U as _e,aa as j,ab as fe,ac as he,G as Ee,q as E,ad as ye,_ as M,g as z,a1 as ee,ae as te,af as ae,e as P,f as U,o as _,c as f,i as e,t as A,W as R,a0 as $,ag as ne,F as L,s as F,a as w,S as oe,k as se,L as V,a2 as K,ah as Y,a3 as Z,ai as ie,aj as J,Z as D,ak as le,p as N,j as q,b as Se,z as be,al as we,am as Ae,an as Re}from"./index-CE0Nud0F.js";function W(l){return he((a,v)=>({get(){return a(),l},set(t){l=t,requestAnimationFrame(()=>{requestAnimationFrame(()=>{v()})})}}))}class Ue extends ge{constructor(a={}){return super(a),this.vueRenderers=G(new Map),this.contentComponent=null,this.reactiveState=W(this.view.state),this.reactiveExtensionStorage=W(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),me(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(a,v){super.registerPlugin(a,v),this.reactiveState.value=this.view.state}unregisterPlugin(a){super.unregisterPlugin(a),this.reactiveState.value=this.view.state}}const re=pe({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(l){const a=S(),v=ye();return _e(()=>{const t=l.editor;t&&t.options.element&&a.value&&Ee(()=>{if(!a.value||!t.options.element.firstChild)return;const c=E(a.value);a.value.append(...t.options.element.childNodes),t.contentComponent=v.ctx._,t.setOptions({element:c}),t.createNodeViews()})}),X(()=>{const t=l.editor;if(!t||(t.isDestroyed||t.view.setProps({nodeViews:{}}),t.contentComponent=null,!t.options.element.firstChild))return;const c=document.createElement("div");c.append(...t.options.element.childNodes),t.setOptions({element:c})}),{rootEl:a}},render(){const l=[];return this.editor&&this.editor.vueRenderers.forEach(a=>{const v=j(fe,{to:a.teleportElement,key:a.id},j(a.component,{ref:a.id,...a.props}));l.push(v)}),j("div",{ref:a=>{this.rootEl=a}},...l)}}),de=(l={})=>{const a=ve();return B(()=>{a.value=new Ue(l)}),X(()=>{var v;(v=a.value)===null||v===void 0||v.destroy()}),a},ce=l=>(N("data-v-ea8c84e8"),l=l(),q(),l),Ie={key:0,class:"admin-section"},$e=ce(()=>e("option",{value:""},"Select Origin",-1)),Te=["value"],xe={class:"submit-btn"},ke={key:0},Ce=ce(()=>e("h3",null,"Existing Plants",-1)),Pe={class:"items-list"},De={class:"button-group"},Le=["onClick"],Fe=["onClick"],Ve={__name:"PlantManagement",setup(l){const a=z(),v=ee(),t=S([]),c=S([]),n=S(!1),s=G({id:null,name:"",origin:"",description:"",image:null,imageURL:""}),I=de({extensions:[te,ae.configure({types:["heading","paragraph"]})],content:"<p>Start typing description...</p>",onUpdate:({editor:r})=>{s.description=r.getHTML()}});B(async()=>{await T(),await x()});async function T(){const r=await P(U(a,"areas"));c.value=r.docs.map(u=>u.data())}async function x(){const r=await P(U(a,"plants"));t.value=r.docs.map(u=>({id:u.id,...u.data()}))}const k=async r=>{const u=r.target.files[0];if(u){const g=K(v,`plants/${u.name}`);await Y(g,u),s.imageURL=await Z(g)}},C=async()=>{if(!s.description||!s.imageURL){console.error("Description or image URL is missing.");return}try{const r=await ie(U(a,"plants"),{name:s.name,origin:s.origin,description:s.description,imageURL:s.imageURL});t.value.push({id:r.id,...s}),y()}catch(r){console.error("Failed to submit plant:",r)}},m=async()=>{if(!s.id)return;await J(D(a,"plants",s.id),s);const r=t.value.findIndex(u=>u.id===s.id);t.value[r]={...s},y()},p=async r=>{await le(D(a,"plants",r)),t.value=t.value.filter(u=>u.id!==r)},h=r=>{Object.assign(s,r),n.value=!0},y=()=>{Object.assign(s,{id:null,name:"",origin:"",description:"",image:null,imageURL:""}),n.value=!1};return(r,u)=>E(I)?(_(),f("section",Ie,[e("h2",null,A(n.value?"Edit Plant":"Add New Plant"),1),e("form",{onSubmit:u[3]||(u[3]=oe(g=>n.value?m():C(),["prevent"]))},[R(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=g=>s.name=g),placeholder:"Plant Name",required:""},null,512),[[$,s.name]]),R(e("select",{"onUpdate:modelValue":u[1]||(u[1]=g=>s.origin=g),required:""},[$e,(_(!0),f(L,null,F(c.value,g=>(_(),f("option",{key:g.id,value:g.name},A(g.name),9,Te))),128))],512),[[ne,s.origin]]),w(E(re),{editor:E(I)},null,8,["editor"]),R(e("textarea",{"onUpdate:modelValue":u[2]||(u[2]=g=>s.description=g),placeholder:"Plant description..."},null,512),[[$,s.description]]),e("input",{type:"file",onChange:k,required:""},null,32),e("button",xe,A(n.value?"Update Plant":"Add Plant"),1)],32),n.value?V("",!0):(_(),f("div",ke,[Ce,e("ul",Pe,[(_(!0),f(L,null,F(t.value,g=>(_(),f("li",{key:g.id},[se(A(g.name)+" ",1),e("div",De,[e("button",{onClick:O=>h(g)},"Edit",8,Le),e("button",{onClick:O=>p(g.id)},"Delete",8,Fe)])]))),128))])]))])):V("",!0)}},Be=M(Ve,[["__scopeId","data-v-ea8c84e8"]]),b=l=>(N("data-v-6d7092fa"),l=l(),q(),l),Me={key:0,class:"admin-section"},Ne={class:"editor-toolbar"},qe={class:"style-dropdown"},Oe=b(()=>e("option",{value:""},"Style",-1)),He=b(()=>e("option",{value:"bold"},"Bold",-1)),je=b(()=>e("option",{value:"italic"},"Italic",-1)),Ge=b(()=>e("option",{value:"underline"},"Underline",-1)),ze=[Oe,He,je,Ge],Ke={class:"align-dropdown"},Ye=b(()=>e("option",{value:""},"Align",-1)),Ze=b(()=>e("option",{value:"left"},"Left",-1)),Je=b(()=>e("option",{value:"center"},"Center",-1)),Qe=b(()=>e("option",{value:"right"},"Right",-1)),We=[Ye,Ze,Je,Qe],Xe=Se('<option value="" data-v-6d7092fa>Heading</option><option value="" data-v-6d7092fa>Paragraph</option><option value="h1" data-v-6d7092fa>Heading 1</option><option value="h2" data-v-6d7092fa>Heading 2</option><option value="h3" data-v-6d7092fa>Heading 3</option><option value="h4" data-v-6d7092fa>Heading 4</option><option value="h5" data-v-6d7092fa>Heading 5</option>',7),et=[Xe],tt={class:"submit-btn"},at={key:0},nt=b(()=>e("h3",null,"Existing Events",-1)),ot={class:"items-list"},st={class:"button-group"},it=["onClick"],lt=["onClick"],rt={__name:"EventManagement",setup(l){const a=z(),v=S([]),t=S([]),c=S(!1),n=G({id:null,title:"",date:"",description:"",image:null,imageURL:"",program:""}),s=de({extensions:[te,ae.configure({types:["heading","paragraph"]})],content:"<p>Start typing...</p>",onUpdate:({editor:i})=>{n.description=i.getHTML()}});B(async()=>{await I()});async function I(){await T(),await x()}async function T(){const i=await P(U(a,"areas"));v.value=i.docs.map(o=>({id:o.id,name:o.data().name}))}async function x(){const i=await P(U(a,"events"));t.value=i.docs.map(o=>({id:o.id,...o.data()}))}async function k(i,o){if(!i){console.error("No file selected");return}const d=K(storage,`${o}/${i.name}`),H=await Y(d,i);return await Z(H.ref)}const C=async i=>{const o=i.target.files[0];o&&(n.imageURL=await k(o,"events"))},m=async()=>{if(!n.description){console.error("Description is missing.");return}const i=await ie(U(a,"events"),{title:n.title,date:n.date,description:n.description,imageURL:n.imageURL,program:n.program});t.value.push({id:i.id,...n}),r()},p=async()=>{if(!n.id)return;await J(D(a,"events",n.id),{title:n.title,date:n.date,description:n.description,imageURL:n.imageURL,program:n.program});const i=t.value.findIndex(o=>o.id===n.id);i!==-1&&(t.value[i]={...n}),r()},h=async i=>{await le(D(a,"events",i)),t.value=t.value.filter(o=>o.id!==i)},y=i=>{Object.assign(n,i),c.value=!0},r=()=>{Object.assign(n,{id:null,title:"",date:"",description:"",image:null,imageURL:"",program:""}),c.value=!1},u=(i,o)=>{if(i)switch(o){case"bold":i.chain().focus().toggleBold().run();break;case"italic":i.chain().focus().toggleItalic().run();break;case"underline":i.chain().focus().toggleUnderline().run();break}},g=(i,o)=>{i&&i.chain().focus().setTextAlign(o).run()},O=(i,o)=>{console.log("Received level:",o);const d=parseInt(o,10);console.log("Parsed heading level:",d),i&&d>0&&d<=5?i.chain().focus().setHeading({level:d}).run():i.chain().focus().setParagraph().run()};return(i,o)=>E(s)?(_(),f("section",Me,[e("h2",null,A(c.value?"Edit Event":"Add New Event"),1),e("form",{onSubmit:o[7]||(o[7]=oe(d=>c.value?p():m(),["prevent"]))},[R(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=d=>n.title=d),placeholder:"Event Title",required:""},null,512),[[$,n.title]]),R(e("input",{type:"date","onUpdate:modelValue":o[1]||(o[1]=d=>n.date=d),required:""},null,512),[[$,n.date]]),R(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=d=>n.program=d),placeholder:"Program",required:""},null,512),[[$,n.program]]),e("div",Ne,[e("div",qe,[e("select",{onChange:o[3]||(o[3]=d=>u(E(s),d.target.value))},ze,32)]),e("div",Ke,[e("select",{onChange:o[4]||(o[4]=d=>g(E(s),d.target.value))},We,32)]),e("select",{onChange:o[5]||(o[5]=d=>O(E(s),d.target.value))},et,32)]),w(E(re),{editor:E(s)},null,8,["editor"]),R(e("textarea",{"onUpdate:modelValue":o[6]||(o[6]=d=>n.description=d),placeholder:"event description..."},null,512),[[$,n.description]]),e("input",{type:"file",onChange:C,required:""},null,32),e("button",tt,A(c.value?"Update Event":"Add Event"),1)],32),c.value?V("",!0):(_(),f("div",at,[nt,e("ul",ot,[(_(!0),f(L,null,F(t.value,d=>(_(),f("li",{key:d.id},[se(A(d.title)+" ",1),e("div",st,[e("button",{onClick:H=>y(d)},"Edit",8,it),e("button",{onClick:H=>h(d.id)},"Delete",8,lt)])]))),128))])]))])):V("",!0)}},dt=M(rt,[["__scopeId","data-v-6d7092fa"]]),Q=l=>(N("data-v-a039fbcc"),l=l(),q(),l),ct={class:"admin-section"},ut=Q(()=>e("h2",null,"Audio Management",-1)),pt={class:"audio-uploader"},vt=Q(()=>e("label",{for:"audio-file",class:"upload-btn"},"Choose Audio",-1)),gt=Q(()=>e("option",{disabled:"",value:""},"Select Area",-1)),mt=["value"],_t=["disabled"],ft={__name:"AudioUploader",setup(l){const a=z(),v=ee(),t=S([]),c=S(""),n=S(""),s=S(null);async function I(){const m=await P(U(a,"areas"));t.value=m.docs.map(p=>({id:p.id,name:p.data().name}))}function T(m){if(m.target.files.length>0){const p=m.target.files[0];console.log("File selected:",p.name,p.size,p.type),s.value=p}else s.value=null}const x=be(()=>c.value&&s.value);async function k(){if(!s.value||!c.value){alert("Please select a file and area before uploading!");return}const m=s.value.files[0];let p={contentType:"audio/mpeg"};if(!p.contentType&&m.name){const y=m.name.split(".").pop().toLowerCase();y==="mp3"?p.contentType="audio/mp3":y==="wav"&&(p.contentType="audio/wav")}const h=K(v,`audio/${m.name}`);try{const y=await Y(h,m,p),r=await Z(y.ref);n.value=r,console.log(r),console.log("Audio uploaded:",r),await C(r),alert("Audio uploaded successfully!")}catch(y){console.error("Upload failed:",y),alert("Upload failed!")}}async function C(m){const p=D(a,"areas",c.value);try{await J(p,{audioURL:m}),console.log("Audio URL saved to Firestore successfully")}catch(h){console.error("Failed to save audio URL to Firestore:",h),alert("Failed to save audio URL!")}}return B(async()=>{await I()}),(m,p)=>(_(),f("section",ct,[ut,e("div",pt,[e("input",{type:"file",ref_key:"fileInput",ref:s,onChange:T,accept:"audio/*",id:"audio-file",style:{display:"none"}},null,544),vt,R(e("select",{"onUpdate:modelValue":p[0]||(p[0]=h=>c.value=h)},[gt,(_(!0),f(L,null,F(t.value,h=>(_(),f("option",{key:h.id,value:h.id},A(h.name),9,mt))),128))],512),[[ne,c.value]]),e("button",{onClick:k,disabled:!x.value,class:"submit-btn"},"Upload Audio",8,_t)])]))}},ht=M(ft,[["__scopeId","data-v-a039fbcc"]]);var Et={VITE_FIREBASE_API_KEY:"AIzaSyBrXS9zQOlmv6BfZgrTLHY402zKsE7Zm9c",VITE_FIREBASE_AUTH_DOMAIN:"geo-kort-og-lydbog.firebaseapp.com",VITE_FIREBASE_DATABASE_URL:"https://geo-kort-og-lydbog-default-rtdb.europe-west1.firebasedatabase.app",VITE_FIREBASE_PROJECT_ID:"geo-kort-og-lydbog",VITE_FIREBASE_STORAGE_BUCKET:"geo-kort-og-lydbog.appspot.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"447721431608",VITE_FIREBASE_APP_ID:"1:447721431608:web:d793a2a1904c6176cfbccd",VITE_FIREBASE_MEASUREMENT_ID:"G-5N25FFYYME",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const yt=3,St=2,bt={__name:"AudioRecorder",setup(l){const a=Et.VITE_FIRE_BASE_STORAGE_BUCKET,v={},t=c=>{console.debug(c)};return(c,n)=>(_(),f("div",null,[w(E(we),{"upload-url":E(a),attempts:yt,time:St,headers:v,onBeforeRecording:t,onPauseRecording:t,onAfterRecording:t,onSelectRecord:t,onBeforeUpload:t,onSuccessfulUpload:t,onFailedUpload:t},null,8,["upload-url"])]))}},wt=l=>(N("data-v-47f3e0f8"),l=l(),q(),l),At={class:"admin-container"},Rt=wt(()=>e("h2",{class:"admin-header"},"Admin Dashboard",-1)),Ut={__name:"AdminDashboard",setup(l){const a=Ae();return Re(),(v,t)=>(_(),f("div",At,[w(ue),Rt,w(Be),w(dt),w(ht),w(bt),e("button",{class:"signout-button",onClick:t[0]||(t[0]=c=>E(a).logout())},"Sign out")]))}},xt=M(Ut,[["__scopeId","data-v-47f3e0f8"]]);export{xt as default};
